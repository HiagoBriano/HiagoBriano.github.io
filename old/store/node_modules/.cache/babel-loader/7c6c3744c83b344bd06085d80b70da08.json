{"ast":null,"code":"import _regeneratorRuntime from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import ShoppingCartButton from'./ShoppingCartButton';import CategoryList from'./CategoryList';import List from'./List';import*as api from'../services/api';var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(){var _this;_classCallCheck(this,Home);_this=_super.call(this);_this.queryFunc=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(input){var idValue,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:idValue=_this.state.idValue;_context.next=3;return api.getProductsFromCategoryAndQuery(idValue,input);case 3:response=_context.sent;_this.setState({results:response.results});case 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.categoryFunc=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id,inputValue){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return api.getProductsFromCategoryAndQuery(id,inputValue);case 2:response=_context2.sent;_this.setState({results:response.results,control:0});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2,_x3){return _ref2.apply(this,arguments);};}();_this.changeInput=function(e){_this.setState({inputValue:e.target.value});};_this.enterFunc=function(e){e.preventDefault();var inputValue=_this.state.inputValue;_this.queryFunc(inputValue);};_this.handleCategoryChange=function(id){_this.setState({idValue:id,control:1});};_this.state={inputValue:'',idValue:'',quantityOnCart:0,results:[],control:0};return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){var results=localStorage.getItem('product');if(results===null){localStorage.setItem('product',JSON.stringify([]));}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var _this$state=this.state,control=_this$state.control,inputValue=_this$state.inputValue;if(control===1){var idValue=this.state.idValue;this.categoryFunc(idValue,inputValue);}}},{key:\"render\",value:function render(){var _this$state2=this.state,inputValue=_this$state2.inputValue,quantityOnCart=_this$state2.quantityOnCart,results=_this$state2.results;return/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(\"section\",{className:\"menu\"},/*#__PURE__*/React.createElement(\"form\",{className:\"formMenu\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"get\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",\"data-testid\":\"query-input\",value:inputValue,onChange:this.changeInput,id:\"get\"}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",\"data-testid\":\"query-button\",onClick:this.enterFunc,id:\"get\"},\"Buscar!\")),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",{\"data-testid\":\"home-initial-message\"},\"Digite algum termo de pesquisa ou escolha uma categoria.\")),/*#__PURE__*/React.createElement(ShoppingCartButton,{quantity:quantityOnCart})),/*#__PURE__*/React.createElement(\"section\",{className:\"mainSearch\"},/*#__PURE__*/React.createElement(CategoryList,{onChange:this.handleCategoryChange}),results.length>0&&/*#__PURE__*/React.createElement(List,{results:results})));}}]);return Home;}(Component);export{Home as default};","map":{"version":3,"sources":["/home/hiago/Trybe/HiagoBriano.github.io/store/src/Components/Home.js"],"names":["React","Component","ShoppingCartButton","CategoryList","List","api","Home","queryFunc","input","idValue","state","getProductsFromCategoryAndQuery","response","setState","results","categoryFunc","id","inputValue","control","changeInput","e","target","value","enterFunc","preventDefault","handleCategoryChange","quantityOnCart","localStorage","getItem","setItem","JSON","stringify","length"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport ShoppingCartButton from './ShoppingCartButton';\nimport CategoryList from './CategoryList';\nimport List from './List';\nimport * as api from '../services/api';\n\nexport default class Home extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      inputValue: '',\n      idValue: '',\n      quantityOnCart: 0,\n      results: [],\n      control: 0,\n    };\n  }\n\n  componentDidMount() {\n    const results = localStorage.getItem('product');\n\n    if (results === null) {\n      localStorage.setItem('product', JSON.stringify([]));\n    }\n  }\n\n  componentDidUpdate() {\n    const { control, inputValue } = this.state;\n    if (control === 1) {\n      const { idValue } = this.state;\n      this.categoryFunc(idValue, inputValue);\n    }\n  }\n\n  queryFunc = async (input) => {\n    const { idValue } = this.state;\n    const response = await api.getProductsFromCategoryAndQuery(idValue, input);\n    this.setState({\n      results: response.results,\n    });\n  }\n\n  categoryFunc = async (id, inputValue) => {\n    const response = await api.getProductsFromCategoryAndQuery(id, inputValue);\n    this.setState({\n      results: response.results,\n      control: 0,\n    });\n  }\n\n  changeInput = (e) => {\n    this.setState({\n      inputValue: e.target.value,\n    });\n  }\n\n  enterFunc = (e) => {\n    e.preventDefault();\n    const { inputValue } = this.state;\n    this.queryFunc(inputValue);\n  }\n\n  handleCategoryChange = (id) => {\n    this.setState({\n      idValue: id,\n      control: 1,\n    });\n  };\n\n  render() {\n    const { inputValue, quantityOnCart, results } = this.state;\n    return (\n      <main>\n        <section className=\"menu\">\n          <form className=\"formMenu\">\n            <label htmlFor=\"get\">\n              <input\n                type=\"text\"\n                data-testid=\"query-input\"\n                value={ inputValue }\n                onChange={ this.changeInput }\n                id=\"get\"\n              />\n              <button\n                type=\"submit\"\n                data-testid=\"query-button\"\n                onClick={ this.enterFunc }\n                id=\"get\"\n              >\n                Buscar!\n              </button>\n            </label>\n            <br />\n            <span\n              data-testid=\"home-initial-message\"\n            >\n              Digite algum termo de pesquisa ou escolha uma categoria.\n            </span>\n          </form>\n\n          <ShoppingCartButton quantity={ quantityOnCart } />\n        </section>\n        <section className=\"mainSearch\">\n          <CategoryList\n            onChange={ this.handleCategoryChange }\n          />\n          { results.length > 0\n          && <List results={ results } />}\n        </section>\n      </main>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}