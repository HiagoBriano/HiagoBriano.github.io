{"ast":null,"code":"import _regeneratorRuntime from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';var ShoppingCart=/*#__PURE__*/function(_Component){_inherits(ShoppingCart,_Component);var _super=_createSuper(ShoppingCart);function ShoppingCart(props){var _this;_classCallCheck(this,ShoppingCart);_this=_super.call(this,props);_this.botao=function(event){var _event$target=event.target,id=_event$target.id,nomeButton=_event$target.name;var products=_this.state.products;// referencia: https://stackoverflow.com/questions/29537299/react-how-to-update-state-item1-in-state-using-setstate\nproducts.find(function(_ref,index){var title=_ref.title,volume=_ref.volume;if(title===id){var items=_toConsumableArray(products);var item=_objectSpread({},items[index]);if(volume>0&&nomeButton==='down'){item.volume-=1;console.log(nomeButton);console.log(volume);}if(volume>=0&&nomeButton==='up'){item.volume+=1;console.log(nomeButton);console.log(volume);}items[index]=item;_this.setState({products:_toConsumableArray(items)});}return null;});};_this.state={products:[]};return _this;}_createClass(ShoppingCart,[{key:\"componentDidMount\",value:function componentDidMount(){this.getProductLocal();}},{key:\"getProductLocal\",value:function getProductLocal(){var _this2=this;var _localStorage=localStorage,product=_localStorage.product;var productList=JSON.parse(product);productList.map(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var fetchProductDetails,productDetails;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://api.mercadolibre.com/items/\".concat(id));case 2:fetchProductDetails=_context.sent;_context.next=5;return fetchProductDetails.json();case 5:productDetails=_context.sent;productDetails.volume=1;console.log(productDetails);_this2.setState(function(prevState){return{products:[].concat(_toConsumableArray(prevState.products),[productDetails])};});case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}());}},{key:\"render\",value:function render(){var _this3=this;var products=this.state.products;if(products.length<1){return/*#__PURE__*/React.createElement(\"span\",{\"data-testid\":\"shopping-cart-empty-message\"},\"Seu carrinho est\\xE1 vazio\");}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",{\"data-testid\":\"shopping-cart-product-quantity\"},products.length),products.map(function(_ref3){var title=_ref3.title,volume=_ref3.volume,price=_ref3.price;return/*#__PURE__*/React.createElement(\"div\",{key:\"\".concat(title)},/*#__PURE__*/React.createElement(\"h3\",{\"data-testid\":\"shopping-cart-product-name\"},\"\".concat(title)),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",name:\"down\",onClick:_this3.botao,id:title,\"data-testid\":\"product-decrease-quantity\"},\"-\"),/*#__PURE__*/React.createElement(\"span\",null,\" \".concat(volume,\" \")),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",name:\"up\",onClick:_this3.botao,id:title,\"data-testid\":\"product-increase-quantity\"},\"+\"),/*#__PURE__*/React.createElement(\"span\",null,\" \".concat((price*volume).toFixed(2),\" \")));}));}}]);return ShoppingCart;}(Component);export{ShoppingCart as default};","map":{"version":3,"sources":["/home/hiago/Trybe/HiagoBriano.github.io/store/src/pages/ShoppingCart.js"],"names":["React","Component","ShoppingCart","props","botao","event","target","id","nomeButton","name","products","state","find","index","title","volume","items","item","console","log","setState","getProductLocal","localStorage","product","productList","JSON","parse","map","fetch","fetchProductDetails","json","productDetails","prevState","length","price","toFixed"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nexport default class ShoppingCart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getProductLocal();\n  }\n\n  getProductLocal() {\n    const { product } = localStorage;\n    const productList = JSON.parse(product);\n\n    productList.map(async (id) => {\n      const fetchProductDetails = await fetch(`https://api.mercadolibre.com/items/${id}`);\n      const productDetails = await fetchProductDetails.json();\n      productDetails.volume = 1;\n      console.log(productDetails);\n      this.setState((prevState) => (\n        { products: [...prevState.products, productDetails] }));\n    });\n  }\n\n  botao = (event) => {\n    const { id, name: nomeButton } = event.target;\n    const { products } = this.state;\n\n    // referencia: https://stackoverflow.com/questions/29537299/react-how-to-update-state-item1-in-state-using-setstate\n    products.find(({ title, volume }, index) => {\n      if (title === id) {\n        const items = [...products];\n        const item = { ...items[index] };\n        if (volume > 0 && nomeButton === 'down') {\n          item.volume -= 1;\n          console.log(nomeButton);\n          console.log(volume);\n        } if (volume >= 0 && nomeButton === 'up') {\n          item.volume += 1;\n          console.log(nomeButton);\n          console.log(volume);\n        }\n        items[index] = item;\n        this.setState({ products: [...items] });\n      }\n      return null;\n    });\n  }\n\n  render() {\n    const { products } = this.state;\n\n    if (products.length < 1) {\n      return (\n        <span data-testid=\"shopping-cart-empty-message\">\n          Seu carrinho est√° vazio\n        </span>\n      );\n    }\n\n    return (\n      <div>\n        <span data-testid=\"shopping-cart-product-quantity\">{ products.length }</span>\n        { products.map(({ title, volume, price }) => (\n          <div key={ `${title}` }>\n            <h3 data-testid=\"shopping-cart-product-name\">{`${title}`}</h3>\n            <button\n              type=\"button\"\n              name=\"down\"\n              onClick={ this.botao }\n              id={ title }\n              data-testid=\"product-decrease-quantity\"\n            >\n              -\n            </button>\n            <span>{` ${volume} `}</span>\n            <button\n              type=\"button\"\n              name=\"up\"\n              onClick={ this.botao }\n              id={ title }\n              data-testid=\"product-increase-quantity\"\n            >\n              +\n            </button>\n            <span>{` ${(price * volume).toFixed(2)} `}</span>\n          </div>\n        ))}\n        {/* { products.map(({ id, title, thumbnail, price }) => (\n          <div key={ id }>\n            <h1 data-testid=\"shopping-cart-product-name\">{ title }</h1>\n            <img src={ thumbnail } alt={ title } />\n            <p>{ price }</p>\n          </div>\n        )) } */}\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}