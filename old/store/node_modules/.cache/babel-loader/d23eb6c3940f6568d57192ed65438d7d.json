{"ast":null,"code":"import _toConsumableArray from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/hiago/Trybe/HiagoBriano.github.io/store/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import ShoppingCartButton from'../Components/ShoppingCartButton';import*as api from'../services/api';var ItemPage=/*#__PURE__*/function(_Component){_inherits(ItemPage,_Component);var _super=_createSuper(ItemPage);function ItemPage(){var _this;_classCallCheck(this,ItemPage);_this=_super.call(this);_this.fetcher=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var MLB;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:/* regex for getting everything after last slash\n    https://stackoverflow.com/questions/8945477/regular-expression-for-getting-everything-after-last-slash */MLB=window.location.pathname.match(/[^/]+$/);_context.t0=_this;_context.next=4;return api.getDetailsById(MLB);case 4:_context.t1=_context.sent;_context.t2=MLB;_context.t3={details:_context.t1,id:_context.t2};_context.t0.setState.call(_context.t0,_context.t3);case 8:case\"end\":return _context.stop();}}},_callee);}));_this.addProduct=function(_ref2){var target=_ref2.target;var _localStorage=localStorage,product=_localStorage.product;var list=JSON.parse(product);localStorage.setItem('product',JSON.stringify([].concat(_toConsumableArray(list),[target.id])));};_this.state={details:{},id:''};return _this;}_createClass(ItemPage,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetcher();}},{key:\"render\",value:function render(){var _this$state=this.state,details=_this$state.details,id=_this$state.id;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ShoppingCartButton,{quantity:0}),/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"h2\",{\"data-testid\":\"product-detail-name\"},details.title)),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",id:id,\"data-testid\":\"product-detail-add-to-cart\",onClick:this.addProduct},\"Add ao carrinho\"),/*#__PURE__*/React.createElement(\"section\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Avalia\\xE7\\xF5es\"),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"input\",{placeholder:\"Email\",type:\"email\",required:true}),/*#__PURE__*/React.createElement(\"input\",{placeholder:\"Mensagem (opcional)\",\"data-testid\":\"product-detail-evaluation\",type:\"textarea\"}))));}}]);return ItemPage;}(Component);export{ItemPage as default};","map":{"version":3,"sources":["/home/hiago/Trybe/HiagoBriano.github.io/store/src/pages/ItemPage.js"],"names":["React","Component","ShoppingCartButton","api","ItemPage","fetcher","MLB","window","location","pathname","match","getDetailsById","details","id","setState","addProduct","target","localStorage","product","list","JSON","parse","setItem","stringify","state","title"],"mappings":"inCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,kBAAP,KAA+B,kCAA/B,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,iBAArB,C,GAEqBC,CAAAA,Q,oGACnB,mBAAc,0CACZ,wBADY,MAadC,OAbc,sEAaJ,2IACR;AACJ,6GACUC,GAHE,CAGIC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,CAAyBC,KAAzB,CAA+B,QAA/B,CAHJ,yCAKSP,CAAAA,GAAG,CAACQ,cAAJ,CAAmBL,GAAnB,CALT,8CAMFA,GANE,cAKNM,OALM,aAMNC,EANM,0BAIHC,QAJG,qFAbI,SAuBdC,UAvBc,CAuBD,eAAgB,IAAbC,CAAAA,MAAa,OAAbA,MAAa,mBACPC,YADO,CACnBC,OADmB,eACnBA,OADmB,CAE3B,GAAMC,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWH,OAAX,CAAb,CAEAD,YAAY,CAACK,OAAb,CAAqB,SAArB,CAAgCF,IAAI,CAACG,SAAL,8BAAmBJ,IAAnB,GAAyBH,MAAM,CAACH,EAAhC,GAAhC,EACD,CA5Ba,CAGZ,MAAKW,KAAL,CAAa,CACXZ,OAAO,CAAE,EADE,CAEXC,EAAE,CAAE,EAFO,CAAb,CAHY,aAOb,C,kFAEmB,CAClB,KAAKR,OAAL,GACD,C,uCAmBQ,iBACiB,KAAKmB,KADtB,CACCZ,OADD,aACCA,OADD,CACUC,EADV,aACUA,EADV,CAEP,mBACE,qDACE,oBAAC,kBAAD,EAAoB,QAAQ,CAAG,CAA/B,EADF,cAEE,gDACE,0BAAI,cAAY,qBAAhB,EAAuCD,OAAO,CAACa,KAA/C,CADF,CAFF,cAKE,8BACE,IAAI,CAAC,QADP,CAEE,EAAE,CAAGZ,EAFP,CAGE,cAAY,4BAHd,CAIE,OAAO,CAAG,KAAKE,UAJjB,oBALF,cAaE,gDACE,iDADF,cAEE,6CACE,6BAAO,WAAW,CAAC,OAAnB,CAA2B,IAAI,CAAC,OAAhC,CAAwC,QAAQ,KAAhD,EADF,cAEE,6BACE,WAAW,CAAC,qBADd,CAEE,cAAY,2BAFd,CAGE,IAAI,CAAC,UAHP,EAFF,CAFF,CAbF,CADF,CA2BD,C,sBA5DmCd,S,SAAjBG,Q","sourcesContent":["import React, { Component } from 'react';\nimport ShoppingCartButton from '../Components/ShoppingCartButton';\nimport * as api from '../services/api';\n\nexport default class ItemPage extends Component {\n  constructor() {\n    super();\n\n    this.state = {\n      details: {},\n      id: '',\n    };\n  }\n\n  componentDidMount() {\n    this.fetcher();\n  }\n\n  fetcher = async () => {\n    /* regex for getting everything after last slash\n    https://stackoverflow.com/questions/8945477/regular-expression-for-getting-everything-after-last-slash */\n    const MLB = window.location.pathname.match(/[^/]+$/);\n    this.setState({\n      details: await api.getDetailsById(MLB),\n      id: MLB,\n    });\n  }\n\n  addProduct = ({ target }) => {\n    const { product } = localStorage;\n    const list = JSON.parse(product);\n\n    localStorage.setItem('product', JSON.stringify([...list, target.id]));\n  }\n\n  render() {\n    const { details, id } = this.state;\n    return (\n      <>\n        <ShoppingCartButton quantity={ 0 } />\n        <section>\n          <h2 data-testid=\"product-detail-name\">{details.title}</h2>\n        </section>\n        <button\n          type=\"button\"\n          id={ id }\n          data-testid=\"product-detail-add-to-cart\"\n          onClick={ this.addProduct }\n        >\n          Add ao carrinho\n        </button>\n        <section>\n          <h3>Avaliações</h3>\n          <form>\n            <input placeholder=\"Email\" type=\"email\" required />\n            <input\n              placeholder=\"Mensagem (opcional)\"\n              data-testid=\"product-detail-evaluation\"\n              type=\"textarea\"\n            />\n          </form>\n        </section>\n      </ >\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}