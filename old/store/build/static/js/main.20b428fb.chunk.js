(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{23:function(t,e,a){t.exports=a(39)},28:function(t,e,a){},29:function(t,e,a){},39:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(20),o=a.n(c),u=(a(28),a(29),a(14)),i=a(4),s=a(5),l=a(7),p=a(6),d=a(1),m=a(2),h=a.n(m),f=a(8),v=function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=this.props.quantity;return r.a.createElement(u.b,{to:"/shoppingcart","data-testid":"shopping-cart-button"},r.a.createElement("button",{className:"shoppingCartButton",type:"button"},r.a.createElement("img",{src:"https://cdn-icons-png.flaticon.com/512/1374/1374128.png",alt:"Carrinho de compras."}),r.a.createElement("span",null," ".concat(t))))}}]),a}(n.Component),b=function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=this.props,e=t.category,a=t.onChange,n=t.id;return r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"".concat(n)},e,r.a.createElement("input",{className:"reto",type:"radio",name:"category",value:e,onChange:function(){return a(n)},"data-testid":"category"})))}}]),a}(n.Component);function g(){return y.apply(this,arguments)}function y(){return(y=Object(f.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.mercadolibre.com/sites/MLB/categories");case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t,e){return O.apply(this,arguments)}function O(){return(O=Object(f.a)(h.a.mark((function t(e,a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.mercadolibre.com/sites/MLB/search?category=".concat(e,"&q=").concat(a));case 2:return n=t.sent,t.abrupt("return",n.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(t){return k.apply(this,arguments)}function k(){return(k=Object(f.a)(h.a.mark((function t(e){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.mercadolibre.com/items/".concat(e));case 2:return a=t.sent,t.abrupt("return",a.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var C=function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).fetchCategories=Object(f.a)(h.a.mark((function t(){var e;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:(e=t.sent)&&n.setState({categories:e});case 4:case"end":return t.stop()}}),t)}))),n.state={categories:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetchCategories()}},{key:"render",value:function(){var t=this.state.categories,e=this.props.onChange;return r.a.createElement("ul",{className:"categoriaForm"},t.map((function(t){var a=t.id,n=t.name;return r.a.createElement(b,{key:a,category:n,onChange:e,id:a})})))}}]),a}(r.a.Component),w=a(12),x=function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=this.props,e=t.title,a=t.thumbnail,n=t.price,c=t.id,o=t.addProduct;return r.a.createElement(u.b,{"data-testid":"product-detail-link",to:"/itemdetails/".concat(c)},r.a.createElement("li",{"data-testid":"product",className:"item"},r.a.createElement("span",null,e),r.a.createElement("img",{src:a,alt:e}),r.a.createElement("span",null,n),r.a.createElement("button",{type:"button",id:c,"data-testid":"product-add-to-cart",onClick:o},"Add ao carrinho")))}}]),a}(n.Component),S=function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"addProduct",value:function(t){var e=t.target,a=localStorage.product,n=JSON.parse(a);localStorage.setItem("product",JSON.stringify([].concat(Object(w.a)(n),[e.id])))}},{key:"render",value:function(){var t=this,e=this.props.results;return e.length>0?r.a.createElement("ul",{className:"items-Card"},e.map((function(e){return r.a.createElement(x,Object.assign({key:e.id},e,{addProduct:t.addProduct}))}))):r.a.createElement("h3",null,"Nenhum produto foi encontrado")}}]),a}(n.Component),q=function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){var t;return Object(i.a)(this,a),(t=e.call(this)).queryFunc=function(){var e=Object(f.a)(h.a.mark((function e(a){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.idValue,e.next=3,E(n,a);case 3:r=e.sent,t.setState({results:r.results});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.categoryFunc=function(){var e=Object(f.a)(h.a.mark((function e(a,n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(a,n);case 2:r=e.sent,t.setState({results:r.results,control:0});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),t.changeInput=function(e){t.setState({inputValue:e.target.value})},t.enterFunc=function(e){e.preventDefault();var a=t.state.inputValue;t.queryFunc(a)},t.handleCategoryChange=function(e){t.setState({idValue:e,control:1})},t.state={inputValue:"",idValue:"",quantityOnCart:0,results:[],control:0},t}return Object(s.a)(a,[{key:"componentDidMount",value:function(){null===localStorage.getItem("product")&&localStorage.setItem("product",JSON.stringify([]))}},{key:"componentDidUpdate",value:function(){var t=this.state,e=t.control,a=t.inputValue;if(1===e){var n=this.state.idValue;this.categoryFunc(n,a)}}},{key:"render",value:function(){var t=this.state,e=t.inputValue,a=t.quantityOnCart,n=t.results;return r.a.createElement("main",null,r.a.createElement("section",{className:"menu"},r.a.createElement("form",{className:"formMenu"},r.a.createElement("label",{htmlFor:"get"},r.a.createElement("input",{type:"text","data-testid":"query-input",value:e,onChange:this.changeInput,id:"get"}),r.a.createElement("button",{type:"submit","data-testid":"query-button",onClick:this.enterFunc,id:"get"},"Buscar!")),r.a.createElement("br",null),r.a.createElement("span",{"data-testid":"home-initial-message"},"Digite algum termo de pesquisa ou escolha uma categoria.")),r.a.createElement(v,{quantity:a})),r.a.createElement("section",{className:"mainSearch"},r.a.createElement(C,{onChange:this.handleCategoryChange}),n.length>0&&r.a.createElement(S,{results:n})))}}]),a}(n.Component),N=function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){var t;return Object(i.a)(this,a),(t=e.call(this)).fetcher=Object(f.a)(h.a.mark((function e(){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=window.location.pathname.match(/[^/]+$/),e.t0=t,e.next=4,j(a);case 4:e.t1=e.sent,e.t2=a,e.t3={details:e.t1,id:e.t2},e.t0.setState.call(e.t0,e.t3);case 8:case"end":return e.stop()}}),e)}))),t.addProduct=function(t){var e=t.target,a=localStorage.product,n=JSON.parse(a);localStorage.setItem("product",JSON.stringify([].concat(Object(w.a)(n),[e.id])))},t.state={details:{},id:""},t}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetcher()}},{key:"render",value:function(){var t=this.state,e=t.details,a=t.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,{quantity:0}),r.a.createElement("section",null,r.a.createElement("h2",{"data-testid":"product-detail-name"},e.title)),r.a.createElement("button",{type:"button",id:a,"data-testid":"product-detail-add-to-cart",onClick:this.addProduct},"Add ao carrinho"),r.a.createElement("section",null,r.a.createElement("h3",null,"Avalia\xe7\xf5es"),r.a.createElement("form",null,r.a.createElement("input",{placeholder:"Email",type:"email",required:!0}),r.a.createElement("input",{placeholder:"Mensagem (opcional)","data-testid":"product-detail-evaluation",type:"textarea"}))))}}]),a}(n.Component),F=a(22),M=function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(t){var n;return Object(i.a)(this,a),(n=e.call(this,t)).botao=function(t){var e=t.target,a=e.id,r=e.name,c=n.state.products;c.find((function(t,e){var o=t.title,u=t.volume;if(o===a){var i=Object(w.a)(c),s=Object(F.a)({},i[e]);u>0&&"down"===r&&(s.volume-=1,console.log(r),console.log(u)),u>=0&&"up"===r&&(s.volume+=1,console.log(r),console.log(u)),i[e]=s,n.setState({products:Object(w.a)(i)})}return null}))},n.state={products:[]},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.getProductLocal()}},{key:"getProductLocal",value:function(){var t=this,e=localStorage.product;JSON.parse(e).map(function(){var e=Object(f.a)(h.a.mark((function e(a){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.mercadolibre.com/items/".concat(a));case 2:return n=e.sent,e.next=5,n.json();case 5:(r=e.sent).volume=1,console.log(r),t.setState((function(t){return{products:[].concat(Object(w.a)(t.products),[r])}}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"render",value:function(){var t=this,e=this.state.products;return e.length<1?r.a.createElement("span",{"data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio"):r.a.createElement("div",null,r.a.createElement("span",{"data-testid":"shopping-cart-product-quantity"},e.length),e.map((function(e){var a=e.title,n=e.volume,c=e.price;return r.a.createElement("div",{key:"".concat(a)},r.a.createElement("h3",{"data-testid":"shopping-cart-product-name"},"".concat(a)),r.a.createElement("button",{type:"button",name:"down",onClick:t.botao,id:a,"data-testid":"product-decrease-quantity"},"-"),r.a.createElement("span",null," ".concat(n," ")),r.a.createElement("button",{type:"button",name:"up",onClick:t.botao,id:a,"data-testid":"product-increase-quantity"},"+"),r.a.createElement("span",null," ".concat((c*n).toFixed(2)," ")))})))}}]),a}(n.Component),V=function(t){Object(l.a)(a,t);var e=Object(p.a)(a);function a(){return Object(i.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",exact:!0},r.a.createElement(q,null)),r.a.createElement(d.a,{path:"/shoppingcart"},r.a.createElement(M,null)),r.a.createElement(d.a,{path:"/itemdetails/:MLB"},r.a.createElement(N,null)))}}]),a}(n.Component);var J=function(){return r.a.createElement(u.a,{basename:"/store"},r.a.createElement(V,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.20b428fb.chunk.js.map